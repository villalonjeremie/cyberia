<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Cyberia ‚Äì API Log Analyzer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<header class="header">
  <h1>üõ° Cyber IA üõ°</h1>
  <p>API de collecte et d‚Äôanalyse des logs : IA & Machine Learning <br>
  Comportement anormale, bruteforce lent, scan furtif, bot intelligent</p>
</header>

<main class="container">

  <section class="card">
    <h2>Envoyer vos logs</h2>
    <p>Collez les logs (JSON ou texte brut)</p>

    <textarea id="logInput" placeholder='{"type":"bruteforce",
	"content":{
  "source": "apache",
  "event": "auth_failure",
  "ip": "192.168.1.50",
  "timestamp": "2026-01-04T18:22:10Z",
  "http": {
    "method": "POST",
    "path": "/login",
    "status": 401,
    "bytes": 512,
    "user_agent": "Mozilla/5.0"
  }
}}'></textarea>

    <button onclick="sendLog()">Envoyer le log</button>
    <pre id="result"></pre>
  </section>

  <section class="card info">
    <h2>‚öôÔ∏è Fonctionnement</h2>
    <ul>
      <li>API Symfony (POST /api/log)</li>
      <li>Stockage PostgreSQL (jsonb)</li>
      <li>Analyse ML (Isolation Forest)</li>
      <li>D√©tection brute force & anomalies</li>
    </ul>
    <p>
    Logs entrants<br>
            ‚Üì<br>
    Pr√©diction (model_v1)<br>
            ‚Üì<br>
    Stockage logs + scores<br>
            ‚Üì<br>
    Accumulation donn√©es<br>
            ‚Üì<br>
    R√©entra√Ænement (model_v2)<br>
            ‚Üì<br>
    Validation<br>
            ‚Üì<br>
    D√©ploiement nouveau mod√®le</p>
  </section>
</main> 

<footer>
  <p>¬© 2026 ‚Äì POC s√©curit√© & IA - J.VILLALON</p>
</footer>

<script>
async function sendLog() {
  const log = document.getElementById('logInput').value;
  const result = document.getElementById('result');

  result.textContent = "‚è≥ Envoi en cours...";

  try {
    const response = await fetch('/api/log', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: log
    });

    const data = await response.json();
    result.textContent = JSON.stringify(data, null, 2);
  } catch (e) {
    result.textContent = "‚ùå Erreur API";
  }
}
</script>

</body>
</html>
